     1                                  section .data
     2                                      ; Секция данных с инициализированными переменными
     3 00000000 456E7465722031206E-         prompt1 db "Enter 1 number: ", 0          ; Приглашение для первого числа
     3 00000009 756D6265723A2000   
     4                                      prompt1_len equ $ - prompt1               ; Автоматический расчет длины строки prompt1
     5                                      
     6 00000011 456E7465722032206E-         prompt2 db "Enter 2 number: ", 0          ; Приглашение для второго числа  
     6 0000001A 756D6265723A2000   
     7                                      prompt2_len equ $ - prompt2               ; Автоматический расчет длины строки prompt2
     8                                      
     9 00000022 53756D3A2000                result db "Sum: ", 0                      ; Сообщение для вывода результата
    10                                      result_len equ $ - result                 ; Автоматический расчет длины строки result
    11                                      
    12 00000028 0A                          newline db 10                             ; Символ новой строки (ASCII 10 = '\n')
    13                                  
    14                                  section .bss
    15                                      ; Секция неинициализированных данных (резервирование памяти)
    16 00000000 <res 10h>                   buffer1 resb 16      ; Буфер для ввода первого числа (16 байт)
    17 00000010 <res 10h>                   buffer2 resb 16      ; Буфер для ввода второго числа (16 байт)
    18 00000020 ????????????????            num1 resq 1          ; Переменная для хранения первого числа (8 байт)
    19 00000028 ????????????????            num2 resq 1          ; Переменная для хранения второго числа (8 байт)
    20 00000030 ????????????????            sum resq 1           ; Переменная для хранения суммы (8 байт)
    21 00000038 <res 20h>                   output resb 32       ; Буфер для вывода результата как строки (32 байта)
    22                                  
    23                                  section .text
    24                                      global _start        ; Объявление точки входа программы
    25                                  
    26                                  _start:
    27                                      ; === ВВОД ПЕРВОГО ЧИСЛА ===
    28 00000000 B801000000                  mov rax, 1               ; Номер системного вызова: 1 = sys_write (запись)
    29 00000005 BF01000000                  mov rdi, 1               ; Файловый дескриптор: 1 = stdout (стандартный вывод)
    30 0000000A 48BE-                       mov rsi, prompt1         ; Указатель на строку для вывода
    30 0000000C [0000000000000000] 
    31 00000014 BA11000000                  mov rdx, prompt1_len     ; Длина выводимой строки
    32 00000019 0F05                        syscall                  ; Вызов системного вызова - вывод приглашения
    33                                  
    34                                      ; СБРОС БУФЕРА ВЫВОДА (вывод символа новой строки)
    35 0000001B B801000000                  mov rax, 1               ; sys_write
    36 00000020 BF01000000                  mov rdi, 1               ; stdout
    37 00000025 48BE-                       mov rsi, newline         ; Указатель на символ новой строки
    37 00000027 [2800000000000000] 
    38 0000002F BA01000000                  mov rdx, 1               ; Длина: 1 символ
    39 00000034 0F05                        syscall                  ; Вызов системного вызова - вывод новой строки
    40                                  
    41                                      ; ЧТЕНИЕ ПЕРВОГО ЧИСЛА С КЛАВИАТУРЫ
    42 00000036 B800000000                  mov rax, 0               ; Номер системного вызова: 0 = sys_read (чтение)
    43 0000003B BF00000000                  mov rdi, 0               ; Файловый дескриптор: 0 = stdin (стандартный ввод)
    44 00000040 48BE-                       mov rsi, buffer1         ; Указатель на буфер для ввода данных
    44 00000042 [0000000000000000] 
    45 0000004A BA10000000                  mov rdx, 16              ; Максимальное количество байт для чтения
    46 0000004F 0F05                        syscall                  ; Вызов системного вызова - чтение ввода пользователя
    47                                  
    48                                      ; === КОНВЕРТАЦИЯ ПЕРВОГО ЧИСЛА ИЗ СТРОКИ В ЧИСЛО ===
    49 00000051 48BE-                       mov rsi, buffer1         ; Передача указателя на строку в RSI (аргумент функции)
    49 00000053 [0000000000000000] 
    50 0000005B E8F8000000                  call string_to_int       ; Вызов функции преобразования строки в число
    51 00000060 48890425[20000000]          mov [num1], rax          ; Сохранение результата в переменную num1
    52                                  
    53                                      ; === ВВОД ВТОРОГО ЧИСЛА ===
    54 00000068 B801000000                  mov rax, 1               ; sys_write
    55 0000006D BF01000000                  mov rdi, 1               ; stdout
    56 00000072 48BE-                       mov rsi, prompt2         ; Приглашение для второго числа
    56 00000074 [1100000000000000] 
    57 0000007C BA11000000                  mov rdx, prompt2_len     ; Длина приглашения
    58 00000081 0F05                        syscall                  ; Вывод приглашения
    59                                  
    60                                      ; СБРОС БУФЕРА ВЫВОДА
    61 00000083 B801000000                  mov rax, 1               ; sys_write
    62 00000088 BF01000000                  mov rdi, 1               ; stdout
    63 0000008D 48BE-                       mov rsi, newline         ; Символ новой строки
    63 0000008F [2800000000000000] 
    64 00000097 BA01000000                  mov rdx, 1               ; Длина: 1 символ
    65 0000009C 0F05                        syscall                  ; Вывод новой строки
    66                                  
    67 0000009E B800000000                  mov rax, 0               ; sys_read
    68 000000A3 BF00000000                  mov rdi, 0               ; stdin
    69 000000A8 48BE-                       mov rsi, buffer2         ; Буфер для второго числа
    69 000000AA [1000000000000000] 
    70 000000B2 BA10000000                  mov rdx, 16              ; Максимальная длина ввода
    71 000000B7 0F05                        syscall                  ; Чтение второго числа
    72                                  
    73                                      ; === КОНВЕРТАЦИЯ ВТОРОГО ЧИСЛА ИЗ СТРОКИ В ЧИСЛО ===
    74 000000B9 48BE-                       mov rsi, buffer2         ; Указатель на строку второго числа
    74 000000BB [1000000000000000] 
    75 000000C3 E890000000                  call string_to_int       ; Преобразование строки в число
    76 000000C8 48890425[28000000]          mov [num2], rax          ; Сохранение результата в num2
    77                                  
    78                                      ; === СЛОЖЕНИЕ ЧИСЕЛ ===
    79 000000D0 488B0425[20000000]          mov rax, [num1]          ; Загрузка первого числа в RAX
    80 000000D8 48030425[28000000]          add rax, [num2]          ; Сложение с вторым числом
    81 000000E0 48890425[30000000]          mov [sum], rax           ; Сохранение результата в переменную sum
    82                                  
    83                                      ; === ВЫВОД РЕЗУЛЬТАТА ===
    84 000000E8 B801000000                  mov rax, 1               ; sys_write
    85 000000ED BF01000000                  mov rdi, 1
    86                                  ; stdout
    87 000000F2 48BE-                       mov rsi, result          ; Сообщение "Sum: "
    87 000000F4 [2200000000000000] 
    88 000000FC BA06000000                  mov rdx, result_len      ; Длина сообщения
    89 00000101 0F05                        syscall                  ; Вывод сообщения "Sum: "
    90                                  
    91                                      ; ПРЕОБРАЗОВАНИЕ СУММЫ ИЗ ЧИСЛА В СТРОКУ
    92 00000103 488B0425[30000000]          mov rax, [sum]           ; Загрузка суммы в RAX
    93 0000010B 48BF-                       mov rdi, output          ; Указатель на буфер для результата
    93 0000010D [3800000000000000] 
    94 00000115 E866000000                  call int_to_string       ; Вызов функции преобразования числа в строку
    95                                  
    96                                      ; ВЫВОД РЕЗУЛЬТАТА (СУММЫ)
    97 0000011A B801000000                  mov rax, 1               ; sys_write
    98 0000011F BF01000000                  mov rdi, 1               ; stdout
    99 00000124 48BE-                       mov rsi, output          ; Буфер с преобразованной строкой
    99 00000126 [3800000000000000] 
   100 0000012E 4889DA                      mov rdx, rbx             ; Длина строки (возвращается функцией int_to_string в RBX)
   101 00000131 0F05                        syscall                  ; Вывод суммы
   102                                  
   103                                      ; ФИНАЛЬНЫЙ ПЕРЕВОД СТРОКИ
   104 00000133 B801000000                  mov rax, 1               ; sys_write
   105 00000138 BF01000000                  mov rdi, 1               ; stdout
   106 0000013D 48BE-                       mov rsi, newline         ; Символ новой строки
   106 0000013F [2800000000000000] 
   107 00000147 BA01000000                  mov rdx, 1               ; Длина: 1 символ
   108 0000014C 0F05                        syscall                  ; Вывод новой строки
   109                                  
   110                                      ; === ЗАВЕРШЕНИЕ ПРОГРАММЫ ===
   111 0000014E B83C000000                  mov rax, 60              ; Номер системного вызова: 60 = sys_exit (завершение)
   112 00000153 4831FF                      xor rdi, rdi             ; Код возврата: 0 (успешное завершение)
   113 00000156 0F05                        syscall                  ; Завершение программы
   114                                  
   115                                  ; === ФУНКЦИИ ===
   116                                  
   117                                  ; Функция преобразования строки в число
   118                                  ; Вход: RSI = указатель на строку
   119                                  ; Выход: RAX = преобразованное число
   120                                  string_to_int:
   121 00000158 4831C0                      xor rax, rax             ; Обнуление RAX (здесь будет накапливаться результат)
   122 0000015B 4831C9                      xor rcx, rcx             ; Обнуление RCX (используется как индекс/счетчик)
   123                                  convert_loop:
   124 0000015E 480FB6140E                  movzx rdx, byte [rsi + rcx]  ; Загрузка текущего символа с нулевым расширением
   125 00000163 4883FA0A                    cmp rdx, 10              ; Проверка на символ новой строки (конец ввода)
   126 00000167 7416                        je done                  ; Если символ новой строки - завершение
   127 00000169 4883FA00                    cmp rdx, 0               ; Проверка на нулевой символ (конец строки)
   128 0000016D 7410                        je done                  ; Если нулевой символ - завершение
   129 0000016F 4883EA30                    sub rdx, '0'             ; Преобразование ASCII символа в цифру (вычитаем '0')
   130 00000173 486BC00A                    imul rax, 10             ; Умножение текущего результата на 10 (сдвиг разрядов)
   131 00000177 4801D0                      add rax, rdx             ; Добавление текущей цифры к результату
   132 0000017A 48FFC1                      inc rcx                  ; Переход к следующему символу
   133 0000017D EBDF                        jmp convert_loop         ; Повтор цикла
   134                                  done:
   135 0000017F C3                          ret                      ; Возврат из функции
   136                                  
   137                                  ; Функция преобразования числа в строку
   138                                  ; Вход: RAX = число для преобразования, RDI = указатель на буфер для строки
   139                                  ; Выход: RBX = длина результирующей строки
   140                                  int_to_string:
   141 00000180 BB0A000000                  mov rbx, 10              ; Основание системы счисления (10 для десятичной)
   142 00000185 B900000000                  mov rcx, 0               ; Обнуление счетчика цифр
   143 0000018A 4885C0                      test rax, rax            ; Проверка числа на ноль
   144 0000018D 7509                        jnz convert_loop2        ; Если не ноль, переходим к обычному преобразованию
   145                                      
   146                                      ; ОБРАБОТКА СЛУЧАЯ КОГДА ЧИСЛО РАВНО НУЛЮ
   147 0000018F C60730                      mov byte [rdi], '0'      ; Записываем символ '0' в буфер
   148 00000192 BB01000000                  mov rbx, 1               ; Устанавливаем длину строки = 1
   149 00000197 C3                          ret                      ; Возврат из функции
   150                                  
   151                                  convert_loop2:
   152 00000198 4831D2                      xor rdx, rdx             ; Обнуление RDX для операции деления
   153 0000019B 48F7F3                      div rbx                  ; Деление RAX на 10: RAX = частное, RDX = остаток
   154 0000019E 80C230                      add dl, '0'              ; Преобразование цифры в ASCII символ
   155 000001A1 52                          push rdx                 ; Сохранение цифры в стеке (в обратном порядке)
   156 000001A2 48FFC1                      inc rcx                  ; Увеличение счетчика цифр
   157 000001A5 4885C0                      test rax, rax            ; Проверка, не стало ли частное нулем
   158 000001A8 75EE                        jnz convert_loop2        ; Если не ноль, продолжаем цикл
   159                                      
   160                                      ; ПЕРЕВОРАЧИВАЕМ ЦИФРЫ ИЗ СТЕКА В ПРАВИЛЬНОМ ПОРЯДКЕ
   161 000001AA 4889CB                      mov rbx, rcx             ; Сохраняем количество цифр в RBX (длина строки)
   162                                  reverse_loop2:
   163 000001AD 5A                          pop rdx                  ; Извлекаем цифру из стека (в правильном порядке)
   164 000001AE 8817                        mov [rdi], dl            ; Записываем символ в буфер
   165 000001B0 48FFC7                      inc rdi                  ; Переходим к следующей позиции в буфере
   166 000001B3 E2F8                        loop reverse_loop2       ; Повторяем для всех цифр
   167                                      
   168 000001B5 C60700                      mov byte [rdi], 0        ; Добавляем нулевой символ в конец строки
   169 000001B8 C3                          ret                      ; Возврат из функции
